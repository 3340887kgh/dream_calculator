<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <!-- 반응형 + iOS 확대 방지(폰트 16px 이상) -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>꿈 계산기</title>

  <style>
    /* ===== 레이아웃 & 반응형 ===== */
    body {
      font-family: sans-serif;
      margin: 20px auto;
      line-height: 1.6;
      max-width: 600px;
      /* 모바일에서 좌우 여백 확보 */
      padding: 0 20px;
      box-sizing: border-box;
    }
    @media (max-width: 600px) {
      body {
        padding: 0 30px;
        font-size: 14px; /* 화면 작아질 때 폰트 축소 */
      }
    }

    /* ===== 큰 제목 (꿈 계산기) ===== */
    h1 {
      margin-bottom: 10px;
      text-align: center;
      font-size: 300%; 
    }

    /* ===== 섹션 제목 & 상단 간격 ===== */
    h2 {
      margin-top: 40px; /* 섹션 구분 위해 상단 여백 추가 */
      margin-bottom: 10px;
    }

    /* ===== form-group: 라벨 + 인풋 한 줄 배치 + 일정 간격 ===== */
    .form-group {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }
    .form-group label {
      width: 120px;
      margin-right: 10px;
    }

    /* ===== 밑줄 인풋 스타일 ===== */
    .form-group input {
      width: 150px;
      padding: 5px;
      text-align: right;
      font-size: 16px;   /* iOS 자동 확대 방지 */
      border: none;
      border-bottom: 1px solid #ccc;
      background: transparent;
      outline: none;
      transition: border-color 0.2s ease;
    }
    .form-group input:focus {
      border-bottom: 2px solid #2196F3; /* 포커스 시 파란색 강조 */
    }

    .form-group span {
      margin-left: 5px;
    }
    .hint {
      color: #666;
      margin-left: 10px;
    }

    /* ===== 결과 & 디테일 텍스트 ===== */
    .result {
      margin-top: 20px;
      font-weight: bold;
      font-size: 1.2em;
    }
    .detail {
      font-size: 0.8em; 
      color: #333;
      margin-left: 6px;
    }

    /* ===== 구분선 (divider) ===== */
    .divider {
      margin: 30px 0;
      border-top: 1px solid #ccc;
    }

    /* ===== Material-like 버튼 ===== */
    button {
      background-color: #2196F3;
      border: none;
      color: #fff;
      border-radius: 4px;
      padding: 8px 16px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      margin-left: 10px; /* 기존 margin-left 유지 */
    }
    button:hover {
      background-color: #1976D2;
    }

    /* 입력 요소 폰트 크기를 16px 이상으로 설정 (자동 확대 방지) */
    input, select, textarea {
      font-size: 16px;
    }
  </style>
</head>
<body>

  <!-- =========================
       (1) 원하는 월 생활비 → 미래에 필요한 목돈
      ========================= -->
  <h1>꿈 계산기</h1>
  <p>
    현재의 물가로, 얼마의 월 생활비를 원하시나요? 필요한 목돈을 계산해드립니다.
  </p>
  <h2>원하는 월 생활비 → 미래에 필요한 목돈</h2>

  <div class="form-group">
    <label for="C26">원하는 월 생활비</label>
    <input type="text" id="C26" placeholder="예: 4,500,000" />
    <span>원</span>
    <span id="C26_million" class="hint">(0원)</span>
  </div>
  <div class="form-group">
    <label for="C27">인출율</label>
    <input type="number" id="C27" placeholder="예: 3.5" step="0.1" />
    <span>%</span>
  </div>
  <div class="form-group">
    <label for="C28">연수</label>
    <input type="number" id="C28" placeholder="예: 20" />
    <span>년</span>
  </div>
  <div class="form-group">
    <label for="C29">인플레이션</label>
    <input type="number" id="C29" placeholder="예: 3" step="0.1" />
    <span>%</span>
  </div>

  <!-- 결과 -->
  <div class="result">
    필요한 돈: 
    <span id="C31">0원</span>
    <span id="C31Detail" class="detail">(0원)</span>
  </div>
  <div class="result">
    현재 가치: 
    <span id="C32">0원</span>
    <span id="C32Detail" class="detail">(0원)</span>
  </div>

  <!-- 한 줄 간격 -->
  <div style="height:10px;"></div>

  <!-- 추가된 안내문 (4%와 3.5%만 빨간색) -->
  <p id="tipsText" style="line-height:1.5; margin:0;"></p>

  <!-- 구분선 -->
  <div class="divider"></div>

  <!-- =========================
       (2) 낙원 계산기 (제목만 바뀐 상태)
      ========================= -->
  <h2>낙원 계산기</h2>
  <p>
    현재 보유한 자산과, 
    <span style="color:red; font-weight:bold;">연간</span>으로 얼마를 투자하는지 적어주세요.  
    그럼 은퇴 시점에 얼마의 자산을 가질 수 있는지 계산됩니다.
  </p>

  <!-- 보유 자산 -->
  <div class="form-group">
    <label for="B36">보유 자산</label>
    <input type="text" id="B36" placeholder="예: 100,000,000" />
    <span>원</span>
    <span id="B36_million" class="hint">(0원)</span>
  </div>

  <!-- 연간 저축 금액 -->
  <div class="form-group">
    <label for="B37">
      <span style="color:red; font-weight:bold;">연간</span> 저축 금액
    </label>
    <input type="text" id="B37" placeholder="예: 12,000,000" />
    <span>원</span>
    <span id="B37_million" class="hint">(0원)</span>
  </div>

  <!-- 기간 (N년) -->
  <div class="form-group">
    <label for="B38">기간</label>
    <input type="number" id="B38" placeholder="예: 25" />
    <span>년</span>
  </div>

  <!-- 명목 수익률 -->
  <div class="form-group">
    <label for="B39">명목 수익률</label>
    <input type="number" id="B39" placeholder="예: 10" step="0.1" />
    <span>%</span>
  </div>

  <!-- 저축 증가율 (물가 상승률) -->
  <div class="form-group">
    <label for="B40">저축 증가율<br>(물가 상승률)</label>
    <input type="number" id="B40" placeholder="예: 3" step="0.1" />
    <span>%</span>
  </div>
  <p class="hint" style="margin-left:120px;">
    물가 상승에 맞춰, 저축 금액도 같은 비율로 매년 상승한다고 가정합니다
  </p>

  <!-- 은퇴 후 자산 결과 + 복사 버튼 -->
  <div id="retirementAssetContainer" class="result" style="transition: background-color 0.4s;">
    은퇴 후 자산: 
    <span id="resultValue">0원</span>
    <span id="resultValueDetail" class="detail">(0원)</span>
    <button id="copyResultBtn">결과 복사하기</button>
  </div>
  <div id="retirementAssetMsg" style="margin-top:5px; font-weight:normal;"></div>

  <div class="divider"></div>

  <!-- =========================
       (3) 미래 목돈을 현재로 계산
      ========================= -->
  <p>
    이 돈은 
    <span id="periodYears">0</span>
    년 후의 기준 가치입니다. 현재 기준으로는 얼마의 가치일까요? 환산해보겠습니다.
  </p>
  <h2>미래 목돈을 현재로 계산</h2>

  <div class="form-group">
    <label for="B9">미래 가치</label>
    <input type="text" id="B9" placeholder="0" />
    <span>원</span>
    <span id="B9_million" class="hint">(0원)</span>
  </div>
  <div class="form-group">
    <label for="B10">인플레이션</label>
    <input type="number" id="B10" placeholder="예: 3" step="0.1" />
    <span>%</span>
  </div>
  <div class="form-group">
    <label for="B11">연수</label>
    <input type="number" id="B11" placeholder="예: 25" />
    <span>년</span>
  </div>

  <div class="result">
    현재 가치: 
    <span id="presentValue">0원</span>
    <span id="presentValueDetail" class="detail">(0원)</span>
  </div>

  <div class="divider"></div>

  <!-- =========================
       (4) 미래 목돈 → 인출 가능한 돈
      ========================= -->
  <p>
    그럼, 위의 돈으로 <span id="withdrawYears">0</span>년 후 매달 얼마를 꺼내서 사용할 수 있을까요?
  </p>
  <h2>미래 목돈 → 인출 가능한 돈</h2>

  <div class="form-group">
    <label for="B16">미래 목돈</label>
    <input type="text" id="B16" placeholder="0" />
    <span>원</span>
    <span id="B16_million" class="hint">(0원)</span>
  </div>
  <div class="form-group">
    <label for="B17">인출율</label>
    <input type="number" id="B17" value="3.5" step="0.1" />
    <span>%</span>
  </div>
  <div class="form-group">
    <label for="B18">인플레이션</label>
    <input type="number" id="B18" placeholder="예: 3" step="0.1" />
    <span>%</span>
  </div>
  <div class="form-group">
    <label for="B19">연수</label>
    <input type="number" id="B19" placeholder="예: 25" />
    <span>년</span>
  </div>

  <div class="result">
    가능 월 소득: 
    <span id="possibleIncome">0원</span>
    <span id="possibleIncomeDetail" class="detail">(0원)</span>
  </div>
  <div class="result">
    현재 가치: 
    <span id="withdrawPresentValue">0원</span>
    <span id="withdrawPresentValueDetail" class="detail">(0원)</span>
  </div>

  <div class="divider"></div>

  <!-- =========================
       (5) 현재 가치를 미래 가치로 환산
      ========================= -->
  <h2>현재 가치를 미래 가치로 환산</h2>
  <p style="margin-bottom:10px;">
    예를 들어, 25년 뒤에 자녀에게 4억원을 물려주려면, 인플레이션이 3%일 때 8억 3,751만원이 필요합니다
  </p>

  <div class="form-group">
    <label for="FV_B2">현재 가치</label>
    <input type="text" id="FV_B2" placeholder="예: 400,000,000" />
    <span>원</span>
    <span id="FV_B2_million" class="hint">(0원)</span>
  </div>
  <div class="form-group">
    <label for="FV_B3">인플레이션</label>
    <input type="number" id="FV_B3" placeholder="예: 3" step="0.1" />
    <span>%</span>
  </div>
  <div class="form-group">
    <label for="FV_B4">연수</label>
    <input type="number" id="FV_B4" placeholder="예: 25" />
    <span>년</span>
  </div>

  <div class="result">
    미래 가치: 
    <span id="FV_B5">0원</span>
    <span id="FV_B5Detail" class="detail">(0원)</span>
  </div>

  <script>
    /* ========================
       (A) 기존 JS 로직 그대로
       ======================== */
    /* (기능 함수, 이벤트 리스너 등 전혀 수정하지 않음)
       다만 replaceAll → replace(/,/g, "") 처리가 이미 되어 있다고 가정
       아래 코드를 그대로 넣으시면 됩니다.
    */

    let userModifiedFutureMoney = false;

    function formatKoreanUnits(valueInWon) {
      /* ... 동일 ... */
    }

    function formatInputAndDisplayUnit(id) {
      /* ... 동일 ... */
    }

    function calculateNeededMoney() {
      /* ... 동일 ... */
    }

    function updateTipsText() {
      /* ... 동일 ... */
    }

    function calculateRetirementAsset() {
      /* ... 동일 ... */
    }

    function copyResultToClipboard() {
      /* ... 동일 ... */
    }

    function calculatePresentValue() {
      /* ... 동일 ... */
    }

    function calculateWithdrawal() {
      /* ... 동일 ... */
    }

    function syncWithdrawalInputs() {
      /* ... 동일 ... */
    }

    function syncFirstSectionToOthers() {
      /* ... 동일 ... */
    }

    function compareDreamAndRetirement() {
      /* ... 동일 ... */
    }

    // 이벤트 리스너
    document.getElementById('C26').addEventListener('input', () => {
      /* ... 동일 ... */
    });
    // ...
    // (이하 모든 기존 이벤트 리스너)
    // ...

    // 초기 실행
    calculateNeededMoney();
    updateTipsText();
    syncFirstSectionToOthers();
    syncFutureValueInputs();
  </script>
</body>
</html>
